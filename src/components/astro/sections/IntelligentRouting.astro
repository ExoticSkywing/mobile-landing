---
import { TbDeviceLaptop, TbDeviceMobile, TbHandClick } from "react-icons/tb";
import { BiChip, BiChevronRight } from "react-icons/bi";
import { MdSurfing } from "react-icons/md";
import { FaYoutube, FaXTwitter, FaChevronRight } from "react-icons/fa6"; // Ensure we have these or similar
// Fallback if fa6 not installed: IoLogoYoutube, IoLogoTwitter
import { IoLogoYoutube } from "react-icons/io5";

// Using IoLogoYoutube and a custom X path or simple text if needed, but likely we have standard icons.
// Let's stick to standard react-icons.
---

<div class="relative w-full max-w-5xl mx-auto py-12 md:py-20 select-none">
    
<div class="relative w-full max-w-5xl mx-auto py-12 md:py-20 select-none">
    
    <!-- Shared Coordinate Space Container - SCROLL WRAPPER FOR MOBILE -->
    <!-- Fix: Force min-width on mobile to prevent squashing/overlapping -->
    <!-- Desktop Fix: md:overflow-visible to prevent clipping of extended tags -->
    <div class="w-full overflow-x-auto overflow-y-hidden md:overflow-visible pb-6 md:pb-0 hide-scrollbar mask-fade-right">
        <div class="relative min-w-[850px] md:min-w-0 w-full h-[320px]">
        
        <!-- SVG Layer for Connections -->
        <!-- viewBox 0 0 100 100 with preserveAspectRatio="none" stretches to fill the container perfectly -->
        <svg class="absolute inset-0 w-full h-full pointer-events-none overflow-visible z-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none">
            <defs>
                <linearGradient id="ir-grad-green" x1="0%" y1="0%" x2="100%" y2="0%">
                    <stop offset="0%" stop-color="#10b981" stop-opacity="0.1" />
                    <stop offset="100%" stop-color="#10b981" stop-opacity="0.8" />
                </linearGradient>
                <linearGradient id="ir-grad-purple" x1="0%" y1="0%" x2="100%" y2="0%">
                    <stop offset="0%" stop-color="#8b5cf6" stop-opacity="0.1" />
                    <stop offset="100%" stop-color="#8b5cf6" stop-opacity="0.8" />
                </linearGradient>
                <linearGradient id="ir-grad-blue" x1="0%" y1="0%" x2="100%" y2="0%">
                    <stop offset="0%" stop-color="#06b6d4" stop-opacity="0.1" />
                    <stop offset="100%" stop-color="#3b82f6" stop-opacity="0.8" />
                </linearGradient>
                <filter id="ir-glow">
                    <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
                    <feMerge>
                        <feMergeNode in="coloredBlur"/>
                        <feMergeNode in="SourceGraphic"/>
                    </feMerge>
                </filter>
            </defs>

            <!-- Leg 1: Device (10, 50) to Chip (30, 50) -->
            <path id="ir-path-1" d="M 10 50 L 30 50" stroke="url(#ir-grad-green)" stroke-width="0.3" fill="none" stroke-dasharray="1 1" class="opacity-60" vector-effect="non-scaling-stroke" />

            <!-- Leg 2: Chip (30, 50) to Stack (50, [20, 50, 80]) -->
            <path id="ir-path-2-top" d="M 30 50 C 36 50, 44 20, 50 20" stroke="url(#ir-grad-purple)" stroke-width="0.3" fill="none" class="opacity-50" vector-effect="non-scaling-stroke" />
            <path id="ir-path-2-mid" d="M 30 50 L 50 50" stroke="url(#ir-grad-purple)" stroke-width="0.3" fill="none" class="opacity-50" vector-effect="non-scaling-stroke" />
            <path id="ir-path-2-bot" d="M 30 50 C 36 50, 44 80, 50 80" stroke="url(#ir-grad-purple)" stroke-width="0.3" fill="none" class="opacity-50" vector-effect="non-scaling-stroke" />

            <!-- Leg 3: Stack (50, [20, 50, 80]) to Rocket (80, 50) -->
            <!-- Adjusted end point to 80 to give more space on right -->
            <path id="ir-path-3-top" d="M 50 20 C 60 20, 70 50, 80 50" stroke="url(#ir-grad-blue)" stroke-width="0.3" fill="none" class="opacity-50" vector-effect="non-scaling-stroke" />
            <path id="ir-path-3-mid" d="M 50 50 L 80 50" stroke="url(#ir-grad-blue)" stroke-width="0.3" fill="none" class="opacity-50" vector-effect="non-scaling-stroke" />
            <path id="ir-path-3-bot" d="M 50 80 C 60 80, 70 50, 80 50" stroke="url(#ir-grad-blue)" stroke-width="0.3" fill="none" class="opacity-50" vector-effect="non-scaling-stroke" />

            <!-- === P U L S E S === -->
            <!-- Reduced radius to minimize aspect ratio distortion effects -->
            <circle r="1" fill="#34d399" filter="url(#ir-glow)">
                <animateMotion dur="2s" repeatCount="indefinite" calcMode="spline" keyTimes="0;1" keySplines="0.4 0 0.2 1">
                    <mpath href="#ir-path-1" />
                </animateMotion>
            </circle>

            <circle r="0.8" fill="#a78bfa" filter="url(#ir-glow)">
                <animateMotion dur="2.5s" begin="0.3s" repeatCount="indefinite" calcMode="spline" keyTimes="0;1" keySplines="0.4 0 0.2 1">
                    <mpath href="#ir-path-2-top" />
                </animateMotion>
            </circle>
            <circle r="0.8" fill="#a78bfa" filter="url(#ir-glow)">
                <animateMotion dur="2.5s" begin="0.5s" repeatCount="indefinite" calcMode="spline" keyTimes="0;1" keySplines="0.4 0 0.2 1">
                    <mpath href="#ir-path-2-mid" />
                </animateMotion>
            </circle>
            <circle r="0.8" fill="#a78bfa" filter="url(#ir-glow)">
                <animateMotion dur="2.5s" begin="0.7s" repeatCount="indefinite" calcMode="spline" keyTimes="0;1" keySplines="0.4 0 0.2 1">
                    <mpath href="#ir-path-2-bot" />
                </animateMotion>
            </circle>

            <!-- === P U L S E S === -->
            <!-- Leg 3: Inhale (Stack -> Rocket) - ACCELERATED -->
            <!-- KeySplines "0.5 0 1 0.5" -> Starts normal, ends FAST (Gravity assist effect) -->
            
            <circle r="0.6" fill="#06b6d4" filter="url(#ir-glow)">
                <animateMotion dur="2s" begin="1s" repeatCount="indefinite" calcMode="spline" keyTimes="0;1" keySplines="0.7 0 1 0.3">
                    <mpath href="#ir-path-3-top" />
                </animateMotion>
            </circle>
            <circle r="0.6" fill="#06b6d4" filter="url(#ir-glow)">
                <animateMotion dur="2s" begin="1.2s" repeatCount="indefinite" calcMode="spline" keyTimes="0;1" keySplines="0.7 0 1 0.3">
                    <mpath href="#ir-path-3-mid" />
                </animateMotion>
            </circle>
            <circle r="0.6" fill="#06b6d4" filter="url(#ir-glow)">
                <animateMotion dur="2s" begin="1.4s" repeatCount="indefinite" calcMode="spline" keyTimes="0;1" keySplines="0.7 0 1 0.3">
                    <mpath href="#ir-path-3-bot" />
                </animateMotion>
            </circle>

            <!-- SHOCKWAVE RIPPLE at Destination (80, 50) -->
            <!-- Triggered every 2s to match the pulse arrival -->
            <circle cx="80" cy="50" r="0" fill="none" stroke="#22d3ee" stroke-width="2" opacity="0">
                <animate attributeName="r" from="0" to="18" dur="2s" begin="1s" repeatCount="indefinite" /> <!-- Syncs with Pulse 1 impact -->
                <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="2s" begin="1s" repeatCount="indefinite" />
                <animate attributeName="stroke-width" from="2" to="0" dur="2s" begin="1s" repeatCount="indefinite" />
            </circle>
        </svg>

    <!-- HTML Layer (Absolute positioning sharing same bounds) -->
    <div class="absolute inset-0 w-full h-full pointer-events-none">
        
        <!-- Col 1: Device (Center Y: 50%) -->
        <!-- Fix: Center the ICON itself at 50%, text hangs below -->
        <div class="absolute top-1/2 left-[10%] -translate-x-1/2 -translate-y-1/2 pointer-events-auto">
            <div class="relative group">
                <div class="w-16 h-16 rounded-2xl bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 shadow-[0_0_20px_rgba(16,185,129,0.15)] dark:shadow-[0_0_20px_rgba(16,185,129,0.2)] flex items-center justify-center relative z-10 transition-transform group-hover:scale-110">
                    <TbDeviceLaptop className="w-8 h-8 text-emerald-500 dark:text-emerald-400" />
                    <div class="absolute -bottom-2 -right-2 w-7 h-7 bg-white dark:bg-slate-800 rounded-full border border-slate-200 dark:border-slate-600 flex items-center justify-center">
                        <TbDeviceMobile className="w-4 h-4 text-emerald-400 dark:text-emerald-300" />
                    </div>
                </div>
                <!-- Text Absolute -->
                <div class="absolute top-full left-1/2 -translate-x-1/2 mt-4 text-sm font-medium text-gray-600 dark:text-gray-400 text-center whitespace-nowrap">您的设备</div>
            </div>
        </div>

        <!-- Col 2: Chip (Center Y: 50%) -->
        <div class="absolute top-1/2 left-[30%] -translate-x-1/2 -translate-y-1/2 pointer-events-auto">
            <div class="relative group">
               <div class="w-16 h-16 rounded-full bg-white dark:bg-slate-900 border border-violet-200 dark:border-violet-500/40 shadow-[0_0_20px_rgba(139,92,246,0.15)] dark:shadow-[0_0_20px_rgba(139,92,246,0.25)] flex items-center justify-center relative z-10 transition-transform group-hover:scale-110">
                    <div class="absolute inset-0 bg-violet-500/5 dark:bg-violet-500/10 rounded-full animate-pulse"></div>
                    <BiChip className="w-9 h-9 text-violet-500 dark:text-violet-400" />
                </div>
                  <div class="absolute top-full left-1/2 -translate-x-1/2 mt-4 text-sm font-medium text-gray-600 dark:text-gray-400 text-center whitespace-nowrap">深度定制</div>
            </div>
        </div>

        <!-- Col 3: Stack (Top: 20%, Mid: 50%, Bot: 80%) -->
        <!-- GROUP AURA CONTAINER for "Inhale Phase" -->
        <!-- Positioned to wrap the 3 items: 20% to 80% is approx 192px height. -->
        <div class="absolute top-[50%] left-[50%] -translate-x-1/2 -translate-y-1/2 w-24 h-[240px] pointer-events-none z-0">
             <!-- The Aura Border (Base) -->
            <div class="absolute inset-0 rounded-[3rem] border border-cyan-400/20 dark:border-cyan-500/30 bg-gradient-to-b from-violet-500/5 via-cyan-500/5 to-blue-500/5 shadow-[0_0_40px_rgba(34,211,238,0.1)]"></div>
            
            <!-- MARQUEE CURRENT (Purple Snake) -->
            <svg class="absolute inset-0 w-full h-full overflow-visible">
                <rect x="1" y="1" width="94" height="238" rx="46" ry="46" fill="none" stroke="#a855f7" stroke-width="2" stroke-dasharray="60 380" stroke-linecap="round" filter="drop-shadow(0 0 4px #a855f7)">
                    <!-- Perimeter is approx (240-96)*2 + 2*PI*48 = 288 + 301 = 589 -->
                    <!-- Dasharray 60 380 = 440 total. Maybe needs tuning to loop perfectly? -->
                    <!-- Simpler: just rotate a big gap. -->
                    <animate attributeName="stroke-dashoffset" from="440" to="0" dur="3s" repeatCount="indefinite" />
                </rect>
            </svg>

            <!-- Fluctuating Particles/Glow -->
             <div class="absolute inset-x-0 top-[10%] h-[1px] bg-gradient-to-r from-transparent via-cyan-400/30 to-transparent animate-[ping_3s_linear_infinite]"></div>
             <div class="absolute inset-x-0 bottom-[10%] h-[1px] bg-gradient-to-r from-transparent via-blue-400/30 to-transparent animate-[ping_3s_linear_infinite_reverse]"></div>
        </div>

        <div class="absolute top-0 left-[50%] -translate-x-1/2 text-xs font-bold text-transparent bg-clip-text bg-gradient-to-r from-violet-400 to-fuchsia-400 mt-2 pointer-events-auto">
            智能分流
        </div>

        <!-- Stack 1: Gemini (20%) -->
        <div class="absolute top-[20%] left-[50%] -translate-x-1/2 -translate-y-1/2 group z-20 pointer-events-auto">
            <div class="w-12 h-12 bg-white/40 dark:bg-white/5 backdrop-blur-sm rounded-xl border border-white/40 dark:border-white/10 flex items-center justify-center transform group-hover:scale-125 transition-transform duration-300 shadow-[0_0_15px_rgba(255,255,255,0.1)]">
               <img src="/assets/ai/gemini.svg" class="w-7 h-7 opacity-90" />
            </div>
        </div>
        <!-- Stack 2: YouTube (50%) -->
        <div class="absolute top-[50%] left-[50%] -translate-x-1/2 -translate-y-1/2 group z-20 pointer-events-auto">
            <div class="w-14 h-14 bg-red-600/10 backdrop-blur-sm rounded-xl border border-red-500/20 flex items-center justify-center transform group-hover:scale-125 transition-transform duration-300 shadow-[0_0_15px_rgba(239,68,68,0.2)]">
                 <IoLogoYoutube className="w-8 h-8 text-red-500" />
            </div>
        </div>
        <!-- Stack 3: X (80%) -->
        <div class="absolute top-[80%] left-[50%] -translate-x-1/2 -translate-y-1/2 group z-20 pointer-events-auto">
            <div class="w-12 h-12 bg-white/40 dark:bg-white/5 backdrop-blur-sm rounded-xl border border-gray-400/30 dark:border-white/10 flex items-center justify-center transform group-hover:scale-125 transition-transform duration-300 shadow-[0_0_15px_rgba(0,0,0,0.1)]">
                 <FaXTwitter className="w-6 h-6 text-gray-900 dark:text-white" />
            </div>
        </div>

        <!-- Col 4: Surfing (Center Y: 50%) -->
         <div class="absolute top-1/2 left-[80%] -translate-x-1/2 -translate-y-1/2 pointer-events-auto">
            <div class="relative group">
                <!-- significantly larger container for the final node -->
                 <!-- Added custom-throb animation class -->
                 <div class="relative w-40 h-40 flex items-center justify-center animate-[throb_2s_infinite]" style="animation-delay: 1s;">
                    
                    <!-- Surfing Core: User Image -->
                    <div class="relative z-10 w-28 h-28 bg-white/60 dark:bg-slate-900/50 rounded-full flex items-center justify-center transform group-hover:scale-110 transition-transform duration-500 backdrop-blur-sm border border-cyan-100 dark:border-cyan-500/10">
                         <!-- Custom PNG provided by user -->
                         <img src="/assets/ai/surf.png" class="w-24 h-24 object-contain drop-shadow-[0_0_15px_rgba(6,182,212,0.8)]" alt="Surfing" />
                    </div>
                    
                    <!-- HUD Data Tags (Levitating, No Rotation) -->
                    <!-- Tag 1: Frontier (Top Left) -->
                    <div class="absolute top-2 -left-6 animate-[float_3s_ease-in-out_infinite]">
                        <div class="px-3 py-1 bg-white dark:bg-slate-900 border border-cyan-200 dark:border-cyan-400/50 rounded-lg text-xs text-cyan-700 dark:text-cyan-300 font-bold whitespace-nowrap shadow-cyan-500/20 shadow-lg backdrop-blur-md">
                            前沿
                        </div>
                    </div>

                    <!-- Tag 2: Stable (Top Right) -->
                    <div class="absolute -top-2 -right-4 animate-[float_4s_ease-in-out_infinite]" style="animation-delay: 1s;">
                        <div class="px-3 py-1 bg-white dark:bg-slate-900 border border-blue-200 dark:border-blue-500/50 rounded-lg text-xs text-blue-700 dark:text-blue-300 font-bold whitespace-nowrap shadow-blue-500/20 shadow-lg backdrop-blur-md">
                            稳定
                        </div>
                    </div>

                    <!-- Tag 3: High Speed (Bottom Right) - HERO TAG (Largest) -->
                    <div class="absolute bottom-4 -right-8 animate-[float_3.5s_ease-in-out_infinite]" style="animation-delay: 0.5s;">
                        <div class="px-4 py-1.5 bg-white dark:bg-slate-900 border border-teal-200 dark:border-teal-400/80 rounded-xl text-base text-teal-700 dark:text-teal-300 font-extrabold whitespace-nowrap shadow-teal-500/40 shadow-xl backdrop-blur-md tracking-wide transform scale-110">
                            高速
                        </div>
                    </div>
                    
                    <!-- Tag 4: Pure (Bottom Left) -->
                    <div class="absolute -bottom-1 -left-4 animate-[float_4.5s_ease-in-out_infinite]" style="animation-delay: 1.5s;">
                         <div class="px-3 py-1 bg-white dark:bg-slate-900 border border-indigo-200 dark:border-indigo-500/50 rounded-lg text-xs text-indigo-700 dark:text-indigo-300 font-bold whitespace-nowrap shadow-indigo-500/20 shadow-lg backdrop-blur-md">
                            纯净
                        </div>
                    </div>
                </div>
                 <div class="absolute top-full left-1/2 -translate-x-1/2 mt-6 text-base font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-600 to-blue-600 dark:from-cyan-400 dark:to-blue-500 whitespace-nowrap text-shadow-glow">让您一直处于浪尖</div>
            </div>
        </div>
        
    </div>
    </div>

</div>
</div>



<!-- Mobile Scroll Hint Overlay -->
<!-- Re-added Gradient Mask: Shadow in Light Mode, Glow in Dark Mode -->
<div class="absolute right-0 top-0 bottom-0 w-20 pointer-events-none md:hidden z-20 bg-gradient-to-l from-gray-950/30 to-transparent dark:from-white/10"></div>


<!-- 2. Animated Hint Badges (Top-Right and Bottom-Right) -->
<!-- Top Right Badge -->
<div class="absolute right-4 top-4 md:hidden pointer-events-none z-30 flex items-center justify-center animate-[pulse_3s_infinite]">
    <div class="flex items-center gap-1.5 bg-black/40 backdrop-blur-md border border-white/10 rounded-full pl-3 pr-2 py-1.5 shadow-lg">
        <span class="text-[10px] font-medium text-cyan-300 whitespace-nowrap tracking-wider">滑动查看更多</span>
        <FaChevronRight className="w-3 h-3 text-cyan-300 animate-[bounce-right_1s_infinite]" />
    </div>
</div>

<!-- Bottom Right Badge -->
<div class="absolute right-4 bottom-4 md:hidden pointer-events-none z-30 flex items-center justify-center animate-[pulse_3s_infinite]">
    <div class="flex items-center gap-1.5 bg-black/40 backdrop-blur-md border border-white/10 rounded-full pl-3 pr-2 py-1.5 shadow-lg">
        <span class="text-[10px] font-medium text-cyan-300 whitespace-nowrap tracking-wider">滑动查看更多</span>
        <FaChevronRight className="w-3 h-3 text-cyan-300 animate-[bounce-right_1s_infinite]" />
    </div>
</div>

</div>

<style>
@keyframes throb {
    0%, 80% { transform: scale(1); filter: brightness(1); }
    85% { transform: scale(1.05); filter: brightness(1.3); } /* Pulse Hit */
    100% { transform: scale(1); filter: brightness(1); }
}
@keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-6px); }
}
@keyframes bounce-right {
    0%, 100% { transform: translateX(0); }
    50% { transform: translateX(3px); }
}

/* Base utilities */
.hide-scrollbar::-webkit-scrollbar {
    display: none;
}
.hide-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
}
/* Mask is redundant with the new overlay but keeping for safety if removed */
@media (max-width: 768px) {
    .mask-fade-right {
        mask-image: linear-gradient(to right, black 85%, transparent 100%);
        -webkit-mask-image: linear-gradient(to right, black 85%, transparent 100%);
    }
}
</style>
