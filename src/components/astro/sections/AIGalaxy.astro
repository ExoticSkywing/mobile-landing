---
import { siteConfig } from "@config/site";

interface Props {
	storeLinks?: {
		apple: string;
		google: string;
	};
}

import IntelligentRouting from "./IntelligentRouting.astro";
import { IoShieldCheckmark } from "react-icons/io5";

const { storeLinks = siteConfig.storeLinks } = Astro.props;
---

<section class="mb-16">
	<div class="rounded-3xl border border-gray-200 bg-white text-gray-900 px-6 py-10 md:px-10 md:py-12 shadow-inner shadow-black/5 dark:border-white/10 dark:bg-black dark:text-white dark:shadow-black/40 overflow-hidden">


		<div class="text-left">
			<p class="text-xs md:text-sm uppercase tracking-[0.25em] text-gray-600 dark:text-white/60 mb-3">
				AI 服务集成
			</p>
			<h2 class="text-2xl md:text-4xl font-semibold mb-2">
				你想要的全球最先进 AI 模型都在这里
			</h2>
			
			<!-- AI No Degradation Feature Bar (Moved here) -->
			<div class="mb-4 flex items-center gap-2 animate-fade-in-up">
				<span class="inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-amber-500/10 text-amber-700 dark:text-amber-400 ring-1 ring-amber-500/20 text-xs font-bold uppercase tracking-wider backdrop-blur-sm shadow-sm">
					<IoShieldCheckmark className="w-3.5 h-3.5" />
					拒绝降智
				</span>
				<span class="text-sm font-medium text-amber-700/90 dark:text-amber-400/90 tracking-wide">
					原生家宽 IP · 超低纯净度
				</span>
			</div>

			<p class="mb-5 flex flex-nowrap items-center gap-x-3 gap-y-2 overflow-x-visible">
				<span class="text-3xl md:text-5xl font-semibold leading-none bg-gradient-to-r from-sky-400/80 via-violet-400/80 to-fuchsia-400/80 dark:from-sky-200/95 dark:via-violet-300/95 dark:to-fuchsia-200/95 bg-clip-text text-transparent">
					网络调优计划
				</span>
				<a
					href={storeLinks.apple}
					target="_blank"
					rel="noopener noreferrer"
					class="group/pro inline-flex items-center justify-center px-4 py-1.5 rounded-full text-xs md:text-sm font-semibold whitespace-nowrap border border-gray-200 bg-white/60 text-gray-900 hover:bg-white hover:border-violet-200 hover:shadow-[0_0_15px_rgba(167,139,250,0.3)] transition-all dark:border-white/10 dark:bg-white/5 dark:text-white/90 dark:hover:bg-white/10 dark:hover:border-violet-500/30"
				>
					<span class="relative flex items-center gap-1.5">
						<span class="pro-badge px-1.5 py-0.5 rounded text-[10px] font-black uppercase tracking-widest text-black/90 shadow-sm">
							Pro
						</span>
						<span class="tracking-wide group-hover/pro:text-violet-600 dark:group-hover/pro:text-violet-300 transition-colors">权益</span>
						<svg class="w-3.5 h-3.5 text-gray-400 group-hover/pro:text-violet-500 group-hover/pro:translate-x-0.5 transition-all" fill="none" viewBox="0 0 24 24" stroke="currentColor">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 5l7 7-7 7" />
						</svg>
					</span>
				</a>
			</p>

			<!-- AI Attribution Badge -->
			<div id="ai-badge" class="mb-8 flex items-start md:items-center gap-2.5 group cursor-default transition-all duration-300">
				<div class="relative flex h-2 w-2 mt-1.5 md:mt-0 flex-shrink-0">
					<span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-cyan-400 opacity-75"></span>
					<span class="relative inline-flex rounded-full h-2 w-2 bg-cyan-500"></span>
				</div>
				<div class="font-mono text-[11px] md:text-xs text-gray-500/80 dark:text-gray-400/80 tracking-wide uppercase transition-colors flex-1 leading-loose">
					
					<!-- Intro Text -->
					<span>
						<span class="hidden md:inline">As you can see, </span>
						<span>正如你所见，本页面由</span>
					</span>

					<!-- Divider -->
					<span class="text-gray-300 dark:text-gray-600 mx-1">/</span>
					<br class="md:hidden" />

					<!-- AI Stat (Underlined) -->
					<span class="font-bold relative inline-block whitespace-nowrap text-gray-600 dark:text-gray-300 group-hover:text-violet-600 dark:group-hover:text-violet-300 group-[.is-active]:text-violet-600 dark:group-[.is-active]:text-violet-300 transition-colors">
						99% AI 算力
						<span class="absolute bottom-0 left-0 w-full h-[1px] bg-violet-500/50 scale-x-0 group-hover:scale-x-100 group-[.is-active]:scale-x-100 transition-transform origin-left duration-500"></span>
					</span>

					<!-- Divider -->
					<span class="opacity-50 mx-1">·</span>

					<!-- Human Stat (Underlined) -->
					<span class="font-bold relative inline-block whitespace-nowrap text-gray-600 dark:text-gray-300 group-hover:text-red-600 dark:group-hover:text-red-400 group-[.is-active]:text-red-600 dark:group-[.is-active]:text-red-400 transition-colors">
						1% 人类灵感
						<span class="absolute bottom-0 left-0 w-full h-[1px] bg-red-500/50 scale-x-0 group-hover:scale-x-100 group-[.is-active]:scale-x-100 transition-transform origin-left duration-500 delay-100"></span>
					</span>

					<!-- Suffix -->
					<span>共筑</span>
				</div>
			</div>

			<script>
				// Auto-trigger AI Badge animation
				const aiBadge = document.getElementById('ai-badge');
				if (aiBadge) {
					setInterval(() => {
						aiBadge.classList.add('is-active');
						setTimeout(() => {
							aiBadge.classList.remove('is-active');
						}, 1200); // reduced from 2500 to fit 2s interval
					}, 2000); // reduced from 6000 to 2000 (2s)
				}
			</script>
			
			<style>
				.pro-badge {
					position: relative;
					overflow: hidden;
					z-index: 1;
				}
				
				.pro-badge::before {
					content: '';
					position: absolute;
					top: -50%;
					left: -50%;
					width: 200%;
					height: 200%;
					background: conic-gradient(
						from 0deg,
						#a5f3fc,
						#d8b4fe,
						#f0abfc,
						#818cf8,
						#a5f3fc
					);
					animation: pro-rotate 3s linear infinite;
					z-index: -1;
				}
				
				@keyframes pro-rotate {
					from { transform: rotate(0deg); }
					to { transform: rotate(360deg); }
				}
			</style>
			
			<!-- Intelligent Routing Visualization -->
			<IntelligentRouting />



			<p class="text-sm md:text-base text-gray-600 dark:text-white/70 max-w-2xl leading-relaxed">
				开启你的 AI 星图，可 <span class="inline-flex items-center px-2.5 py-0.5 rounded-full bg-emerald-500/10 text-emerald-700 ring-1 ring-emerald-500/15 dark:bg-emerald-400/10 dark:text-emerald-300 dark:ring-emerald-300/15 font-semibold whitespace-nowrap">免费使用</span> OpenAI、Claude、Gemini、LLaMA 等主流最新模型，一键切换，<span class="inline-flex items-center px-2.5 py-0.5 rounded-full bg-violet-500/10 text-violet-700 ring-1 ring-violet-500/15 dark:bg-violet-400/10 dark:text-violet-300 dark:ring-violet-300/15 font-semibold whitespace-nowrap">灵感不掉线</span>
			</p>
			<div class="mt-4 flex flex-wrap items-center gap-x-5 gap-y-2 text-xs md:text-sm text-gray-600/90 dark:text-white/60">
				<span class="inline-flex items-center gap-2 whitespace-nowrap">
					<span class="h-1.5 w-1.5 rounded-full bg-violet-500/70 dark:bg-violet-300/70" />
					更低延迟
				</span>
				<span class="inline-flex items-center gap-2 whitespace-nowrap">
					<span class="h-1.5 w-1.5 rounded-full bg-violet-500/70 dark:bg-violet-300/70" />
					更稳定
				</span>
				<span class="inline-flex items-center gap-2 whitespace-nowrap">
					<span class="h-1.5 w-1.5 rounded-full bg-violet-500/70 dark:bg-violet-300/70" />
					更强劲 AI 赋能
				</span>
			</div>
		</div>

		<div class="mt-10 md:mt-12">
			<div class="ai-galaxy">
				<div class="ai-galaxy-center">
					<span class="ai-galaxy-center-text">AI</span>
					<span class="ai-galaxy-center-glow" />
					<span class="ai-galaxy-center-shimmer" />
				</div>

				<div class="ai-orbit ai-orbit-1">
					<div class="ai-planet" style="--angle: 20deg; --radius: 65px; --size: 66px; --icon: 38px; --max-size: 72px; --max-icon: 44px;">
						<span class="ai-planet-fallback">O</span>
						<img src="/assets/ai/openai.svg" alt="OpenAI" loading="lazy" style="--ai-icon-filter-dark: brightness(0) invert(1) drop-shadow(0 0 6px rgba(255, 255, 255, 0.35));" onload="this.previousElementSibling.style.display='none'; this.style.display='block'" onerror="this.style.display='none'; this.previousElementSibling.style.display='block'" />
					</div>
					<div class="ai-planet" style="--angle: 160deg; --radius: 65px; --size: 62px; --icon: 36px; --max-size: 72px; --max-icon: 44px;">
						<span class="ai-planet-fallback">C</span>
						<img src="/assets/ai/claude.svg" alt="Claude" loading="lazy" onload="this.previousElementSibling.style.display='none'; this.style.display='block'" onerror="this.style.display='none'; this.previousElementSibling.style.display='block'" />
					</div>
				</div>

				<div class="ai-orbit ai-orbit-2">
					<div class="ai-planet" style="--angle: 330deg; --radius: 101px; --size: 62px; --icon: 34px;">
						<span class="ai-planet-fallback">G</span>
						<img src="/assets/ai/gemini.svg" alt="Gemini" loading="lazy" onload="this.previousElementSibling.style.display='none'; this.style.display='block'" onerror="this.style.display='none'; this.previousElementSibling.style.display='block'" />
					</div>
					<div class="ai-planet" style="--angle: 120deg; --radius: 101px; --size: 58px; --icon: 32px;">
						<span class="ai-planet-fallback">D</span>
						<img src="/assets/ai/deepseek.svg" alt="DeepSeek" loading="lazy" onload="this.previousElementSibling.style.display='none'; this.style.display='block'" onerror="this.style.display='none'; this.previousElementSibling.style.display='block'" />
					</div>
					<div class="ai-planet" style="--angle: 220deg; --radius: 101px; --size: 64px; --icon: 36px;">
						<span class="ai-planet-fallback">G</span>
						<img src="/assets/ai/grok.svg" alt="Grok" loading="lazy" style="--ai-icon-filter-dark: brightness(0) invert(1) drop-shadow(0 0 6px rgba(255, 255, 255, 0.35));" onload="this.previousElementSibling.style.display='none'; this.style.display='block'" onerror="this.style.display='none'; this.previousElementSibling.style.display='block'" />
					</div>
				</div>

				<div class="ai-orbit ai-orbit-3">
					<div class="ai-planet" style="--angle: 18deg; --radius: 139px; --size: 64px; --icon: 38px;">
						<span class="ai-planet-fallback">K</span>
						<img src="/assets/ai/kimi.svg" alt="Kimi" loading="lazy" style="--ai-icon-filter-dark: brightness(0) invert(1) drop-shadow(0 0 6px rgba(255, 255, 255, 0.35));" onload="this.previousElementSibling.style.display='none'; this.style.display='block'" onerror="this.style.display='none'; this.previousElementSibling.style.display='block'" />
					</div>
					<div class="ai-planet" style="--angle: 98deg; --radius: 139px; --size: 58px; --icon: 34px;">
						<span class="ai-planet-fallback">Q</span>
						<img src="/assets/ai/qwen.svg" alt="Qwen" loading="lazy" onload="this.previousElementSibling.style.display='none'; this.style.display='block'" onerror="this.style.display='none'; this.previousElementSibling.style.display='block'" />
					</div>
					<div class="ai-planet" style="--angle: 195deg; --radius: 139px; --size: 62px; --icon: 36px;">
						<span class="ai-planet-fallback">F</span>
						<img src="/assets/ai/flux.svg" alt="Flux" loading="lazy" style="--ai-icon-filter-dark: brightness(0) invert(1) drop-shadow(0 0 6px rgba(255, 255, 255, 0.35));" onload="this.previousElementSibling.style.display='none'; this.style.display='block'" onerror="this.style.display='none'; this.previousElementSibling.style.display='block'" />
					</div>
					<div class="ai-planet" style="--angle: 285deg; --radius: 139px; --size: 56px; --icon: 32px;">
						<span class="ai-planet-fallback">O</span>
						<img src="/assets/ai/ollama.svg" alt="Ollama" loading="lazy" style="--ai-icon-filter-dark: brightness(0) invert(1) drop-shadow(0 0 6px rgba(255, 255, 255, 0.35));" onload="this.previousElementSibling.style.display='none'; this.style.display='block'" onerror="this.style.display='none'; this.previousElementSibling.style.display='block'" />
					</div>
				</div>
			</div>
		</div>
	</div>
</section>


<script is:inline>
	(() => {
		const planets = document.querySelectorAll('.ai-galaxy .ai-planet');
		const galaxy = document.querySelector('.ai-galaxy');
		const galaxyScale = galaxy
			? parseFloat(getComputedStyle(galaxy).getPropertyValue('--ai-planet-scale'))
			: 1;
		const globalScale = Number.isFinite(galaxyScale) && galaxyScale > 0 ? galaxyScale : 1;
		const radii = Array.from(planets)
			.map((el) => parseFloat(getComputedStyle(el).getPropertyValue('--radius')))
			.filter((v) => Number.isFinite(v));
		const minR = Math.min(...radii);
		const maxR = Math.max(...radii);

		planets.forEach((el) => {
			const style = getComputedStyle(el);
			const baseSize = parseFloat(style.getPropertyValue('--size')) || 56;
			const baseIcon = parseFloat(style.getPropertyValue('--icon')) || 32;
			const maxSize = parseFloat(style.getPropertyValue('--max-size'));
			const maxIcon = parseFloat(style.getPropertyValue('--max-icon'));
			const radius = parseFloat(style.getPropertyValue('--radius'));
			const t = Number.isFinite(radius) && maxR > minR ? (radius - minR) / (maxR - minR) : 0.5;
			const perspective = 1.28 - t * 0.46;
			const jitter = 0.92 + Math.random() * 0.22;
			const iconJitter = 0.92 + Math.random() * 0.18;
			let size = Math.round(baseSize * perspective * jitter * globalScale);
			let icon = Math.round(baseIcon * perspective * iconJitter * globalScale);
			if (Number.isFinite(maxSize)) size = Math.min(size, maxSize);
			if (Number.isFinite(maxIcon)) icon = Math.min(icon, maxIcon);
			el.style.setProperty('--size', `${size}px`);
			el.style.setProperty('--icon', `${icon}px`);
			el.style.zIndex = String(Math.round(10 + (1 - t) * 10));
		});
	})();
</script>

<style is:global>
	.ai-galaxy {
		position: relative;
		width: min(520px, 100%);
		max-width: 100%;
		aspect-ratio: 1 / 1;
		margin: 0 auto;
		isolation: isolate;
		overflow: hidden;
		content-visibility: auto; /* Optimization: Skips rendering off-screen */
		contain-intrinsic-size: 520px; /* Placeholder size to prevent scroll jump */
		--ai-planet-scale: 0.75;
		--ai-core-size: 58px;
		--ai-core-ring-size: 345px;
		--ai-core-halo-size: 388px;
		--ai-core-ring-size-safe: min(var(--ai-core-ring-size), 92vw);
		--ai-core-halo-size-safe: min(var(--ai-core-halo-size), 92vw);
	}

	@media (min-width: 1024px) {
		.ai-galaxy {
			transform: scale(1.35);
			margin: 70px auto;
		}
	}

	.ai-galaxy-center {
		position: absolute;
		inset: 50% auto auto 50%;
		transform: translate(-50%, -50%);
		width: var(--ai-core-size);
		height: var(--ai-core-size);
		border-radius: 9999px;
		background: radial-gradient(circle at 35% 30%, rgba(255, 255, 255, 0.92), rgba(147, 197, 253, 0.58) 40%, rgba(168, 85, 247, 0.32) 72%, rgba(0, 0, 0, 0) 100%);
		display: grid;
		place-items: center;
		z-index: 3;
		box-shadow: 0 20px 55px rgba(59, 130, 246, 0.22);
		border: 1px solid rgba(59, 130, 246, 0.18);
		animation: ai-core-float 3.2s ease-in-out infinite;
	}

	.ai-galaxy-center::before {
		content: '';
		position: absolute;
		inset: calc((var(--ai-core-size) - var(--ai-core-ring-size-safe)) / 2);
		border-radius: 9999px;
		background: conic-gradient(
			from 180deg,
			rgba(59, 130, 246, 0) 0deg,
			rgba(59, 130, 246, 0.65) 55deg,
			rgba(168, 85, 247, 0.55) 120deg,
			rgba(59, 130, 246, 0.2) 180deg,
			rgba(59, 130, 246, 0) 360deg
		);
		-webkit-mask: radial-gradient(farthest-side, transparent calc(100% - 8px), #000 calc(100% - 7px));
		mask: radial-gradient(farthest-side, transparent calc(100% - 8px), #000 calc(100% - 7px));
		opacity: 0.65;
		filter: blur(0.2px);
		animation: ai-core-spin 5.5s linear infinite;
		z-index: 0;
	}

	.ai-galaxy-center-shimmer {
		position: absolute;
		inset: calc((var(--ai-core-size) - var(--ai-core-ring-size-safe)) / 2);
		border-radius: 9999px;
		background: conic-gradient(from 0deg, rgba(255, 255, 255, 0) 0deg, rgba(255, 255, 255, 0.55) 18deg, rgba(255, 255, 255, 0) 42deg, rgba(255, 255, 255, 0) 360deg);
		-webkit-mask: radial-gradient(farthest-side, transparent calc(100% - 8px), #000 calc(100% - 7px));
		mask: radial-gradient(farthest-side, transparent calc(100% - 8px), #000 calc(100% - 7px));
		opacity: 0.35;
		filter: blur(0.4px);
		animation: ai-core-shimmer 14s linear infinite;
		pointer-events: none;
		z-index: 1;
	}

	.ai-galaxy-center::after {
		content: '';
		position: absolute;
		inset: calc((var(--ai-core-size) - var(--ai-core-halo-size-safe)) / 2);
		border-radius: 9999px;
		background: radial-gradient(circle, rgba(59, 130, 246, 0.24), rgba(168, 85, 247, 0.14), rgba(0, 0, 0, 0) 62%);
		opacity: 0.75;
		filter: blur(1.4px);
		animation: ai-core-pulse 2.6s ease-in-out infinite;
		z-index: 0;
	}

	.dark .ai-galaxy-center {
		background: radial-gradient(circle at 35% 30%, rgba(255, 255, 255, 0.15), rgba(59, 130, 246, 0.35) 45%, rgba(168, 85, 247, 0.35) 75%, rgba(0, 0, 0, 0) 100%);
		box-shadow: 0 18px 55px rgba(168, 85, 247, 0.25);
		border-color: rgba(255, 255, 255, 0.12);
	}

	.dark .ai-galaxy-center::before {
		opacity: 0.85;
	}

	.ai-galaxy-center-text {
		font-weight: 700;
		letter-spacing: 0.12em;
		font-size: 16px;
		color: rgba(17, 24, 39, 0.92);
		text-transform: uppercase;
		position: relative;
		z-index: 2;
		text-shadow: 0 0 18px rgba(59, 130, 246, 0.25);
	}

	.dark .ai-galaxy-center-text {
		color: rgba(255, 255, 255, 0.92);
		text-shadow: 0 0 22px rgba(168, 85, 247, 0.35);
	}

	@supports ((-webkit-background-clip: text) or (background-clip: text)) {
		.ai-galaxy-center-text {
			color: transparent;
			-webkit-text-fill-color: transparent;
			background: linear-gradient(135deg, rgba(17, 24, 39, 0.95), rgba(37, 99, 235, 0.85));
			-webkit-background-clip: text;
			background-clip: text;
		}

		.dark .ai-galaxy-center-text {
			color: transparent;
			-webkit-text-fill-color: transparent;
			background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(147, 197, 253, 0.85), rgba(168, 85, 247, 0.75));
			-webkit-background-clip: text;
			background-clip: text;
		}
	}

	.ai-galaxy-center-glow {
		position: absolute;
		inset: calc((var(--ai-core-size) - var(--ai-core-halo-size-safe)) / 2);
		border-radius: 9999px;
		background: radial-gradient(circle, rgba(168, 85, 247, 0.22), rgba(59, 130, 246, 0.12), rgba(0, 0, 0, 0) 65%);
		filter: blur(2px);
		z-index: 1;
		animation: ai-core-pulse 2.6s ease-in-out infinite;
	}

	.ai-orbit {
		position: absolute;
		inset: 50% auto auto 50%;
		transform: translate(-50%, -50%);
		border-radius: 9999px;
		border: 1px dashed rgba(156, 163, 175, 0.35);
		pointer-events: none;
		z-index: 1;
	}

	.dark .ai-orbit {
		border-color: rgba(255, 255, 255, 0.12);
	}

	.ai-orbit-1 {
		width: 153px;
		height: 153px;
		animation: ai-orbit-spin 10s linear infinite;
	}

	.ai-orbit-2 {
		width: 225px;
		height: 225px;
		animation: ai-orbit-spin 12s linear infinite reverse;
	}

	.ai-orbit-3 {
		width: 324px;
		height: 324px;
		animation: ai-orbit-spin 35s linear infinite;
	}

	.ai-planet {
		position: absolute;
		left: 50%;
		top: 50%;
		width: var(--size, 56px);
		height: var(--size, 56px);
		transform: rotate(var(--angle)) translateX(var(--radius)) rotate(calc(var(--angle) * -1));
		border-radius: 9999px;
		display: grid;
		place-items: center;
		background: rgba(255, 255, 255, 0.9);
		box-shadow: 0 16px 32px rgba(0, 0, 0, 0.08);
		backdrop-filter: blur(10px);
		-webkit-backdrop-filter: blur(10px);
		z-index: 2;
	}

	.dark .ai-planet {
		background: rgba(255, 255, 255, 0.08);
		box-shadow: 0 18px 38px rgba(0, 0, 0, 0.45);
	}

	.ai-planet img {
		width: var(--icon, 32px);
		height: var(--icon, 32px);
		display: block;
		object-fit: contain;
		filter: var(--ai-icon-filter, none);
		opacity: 0.96;
	}

	.dark .ai-planet img {
		filter: var(--ai-icon-filter-dark, var(--ai-icon-filter, none));
	}

	.ai-planet-fallback {
		display: none;
		font-weight: 700;
		font-size: 14px;
		color: rgba(17, 24, 39, 0.6);
		text-transform: uppercase;
		line-height: 1;
	}

	.dark .ai-planet-fallback {
		color: rgba(255, 255, 255, 0.75);
	}

	@keyframes ai-orbit-spin {
		0% {
			transform: translate(-50%, -50%) rotate(0deg);
		}
		100% {
			transform: translate(-50%, -50%) rotate(360deg);
		}
	}

	@keyframes ai-core-spin {
		0% {
			transform: rotate(0deg);
		}
		100% {
			transform: rotate(360deg);
		}
	}

	@keyframes ai-core-pulse {
		0%,
		100% {
			transform: scale(0.98);
			opacity: 0.65;
		}
		50% {
			transform: scale(1.03);
			opacity: 0.95;
		}
	}

	@keyframes ai-core-float {
		0%,
		100% {
			transform: translate(-50%, -50%) scale(1);
		}
		50% {
			transform: translate(-50%, -50%) scale(1.02);
		}
	}

	@keyframes ai-core-shimmer {
		0% {
			transform: rotate(0deg);
		}
		100% {
			transform: rotate(360deg);
		}
	}

	@media (max-width: 768px) {
		.ai-planet {
			backdrop-filter: none;
			-webkit-backdrop-filter: none;
			background: rgba(255, 255, 255, 0.95);
			box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); /* Simplify shadow */
		}

		.dark .ai-planet {
			background: rgba(30, 30, 35, 0.9); /* Dark mode fallback */
			box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
		}
	}

	@media (max-width: 420px) {
		.ai-orbit-1 {
			width: 150px;
			height: 150px;
		}

		.ai-orbit-2 {
			width: 220px;
			height: 220px;
		}

		.ai-orbit-3 {
			width: 300px;
			height: 300px;
		}
	}

	@media (prefers-reduced-motion: reduce) {
		.ai-orbit-1,
		.ai-orbit-2,
		.ai-orbit-3 {
			animation: none;
		}

		.ai-galaxy-center,
		.ai-galaxy-center::before,
		.ai-galaxy-center::after,
		.ai-galaxy-center-glow,
		.ai-galaxy-center-shimmer {
			animation: none;
		}
	}

	/* === Visibility-based Animation Activation === */
	/* Pause animations by default to avoid off-screen render cost */
	.ai-orbit-1,
	.ai-orbit-2,
	.ai-orbit-3,
	.ai-galaxy-center-glow,
	.ai-galaxy-center-shimmer {
		animation-play-state: paused;
	}

	/* Activate animations only when galaxy is visible */
	.ai-galaxy.is-visible .ai-orbit-1,
	.ai-galaxy.is-visible .ai-orbit-2,
	.ai-galaxy.is-visible .ai-orbit-3,
	.ai-galaxy.is-visible .ai-galaxy-center-glow,
	.ai-galaxy.is-visible .ai-galaxy-center-shimmer {
		animation-play-state: running;
	}
</style>

<script is:inline>
	// Intersection Observer to activate AIGalaxy animations only when visible
	(function() {
		const galaxy = document.querySelector('.ai-galaxy');
		if (!galaxy) return;

		const observer = new IntersectionObserver(
			(entries) => {
				entries.forEach(entry => {
					if (entry.isIntersecting) {
						galaxy.classList.add('is-visible');
						galaxy.style.visibility = 'visible'; // Force paint ON
					} else {
						galaxy.classList.remove('is-visible');
						galaxy.style.visibility = 'hidden'; // Force paint OFF
					}
				});
			},
			{
				rootMargin: '100px', // Start animation slightly before fully in view
				threshold: 0.1
			}
		);

		observer.observe(galaxy);
	})();
</script>
