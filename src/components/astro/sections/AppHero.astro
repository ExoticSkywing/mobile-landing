---
/** biome-ignore-all lint/correctness/noUnusedImports: React icons are used in JSX */
/** biome-ignore-all lint/correctness/noUnusedVariables: variables used in Astro components */

import { FaAlipay, FaGooglePlay } from "react-icons/fa";
import { FaCcApplePay } from "react-icons/fa6";
import { BiSupport } from "react-icons/bi";
import RatingStars from "../../ui/RatingStars";
import type { AppHeroProps } from "@/types/app";

interface Props extends AppHeroProps {}

const { title, subtitle, description, storeLinks, logo, logoCrop = false } = Astro.props;

---

<div class="mb-16 flex flex-col items-center md:items-start md:flex-row gap-8 relative isolate overflow-hidden min-h-[300px] rounded-b-3xl md:rounded-3xl p-4 md:p-8 -mx-4 md:mx-0 pt-12 md:pt-8 bg-white dark:bg-black transition-colors duration-300">

	<!-- Static High-Quality Background with Ken Burns Effect -->
	<div class="absolute inset-0 z-0 pointer-events-none overflow-hidden">
		<!-- Light Mode Image: Holo BG -->
		<img 
			src="/assets/apphero/holo-bg-full.png" 
			alt="Hero Background Light" 
			class="absolute inset-0 w-full h-full object-cover opacity-90 dark:opacity-0 transition-opacity duration-500 ken-burns"
		/>
		
		<!-- Dark Mode Image: Fractal Glass -->
		<img 
			src="/assets/apphero/18-fractal-glass-hero-bg.jpg" 
			alt="Hero Background Dark" 
			class="absolute inset-0 w-full h-full object-cover opacity-0 dark:opacity-80 transition-opacity duration-500 ken-burns"
		/>
		
		<!-- Overlay to ensure text readability -->
		<div class="absolute inset-0 bg-white/40 dark:bg-black/30 transition-colors duration-300"></div>
	</div>

	<div class="flex-shrink-0 md:self-center relative z-10">
		{logoCrop ? (
			<div class="rounded-2xl border border-black/5 dark:border-white/10 bg-white/40 dark:bg-white/[0.02] p-6 w-[192px] h-[192px] flex items-center justify-center shadow-lg dark:shadow-sm backdrop-blur-md">
				<img src={logo} alt="App Icon" class="h-40 w-40 rounded-2xl object-cover shadow-sm" />
			</div>
		) : (
			<div class="rounded-2xl border border-black/5 dark:border-white/10 bg-white/40 dark:bg-white/[0.02] p-3 inline-flex items-center justify-center shadow-lg dark:shadow-sm backdrop-blur-md">
				<img
					src={logo}
					alt="App Icon"
					class="max-w-[224px] max-h-[224px] w-auto h-auto object-contain"
				/>
			</div>
		)}
	</div>

	<div class="flex flex-1 flex-col justify-between text-center md:text-left relative z-10">
		<div>
			<h1 class="text-4xl font-bold text-gray-900 dark:text-white mb-2 tracking-tight">{title}</h1>
			
			<div class="flex items-center gap-3 mb-4 justify-center md:justify-start flex-wrap">
				<div class="flex items-center gap-1.5">
					<RatingStars rating={5.0} />
					<span class="text-sm font-medium text-gray-600 dark:text-gray-300 ml-1">· 1.2K ratings</span>
				</div>
			</div>

			<div class="flex items-center gap-2 mb-6 justify-center md:justify-start flex-wrap text-xs">
				<div class="flex items-center gap-1.5 px-3 py-1 rounded-full bg-indigo-100/80 dark:bg-indigo-500/20 border border-indigo-200 dark:border-indigo-400/30 text-indigo-700 dark:text-indigo-200 backdrop-blur-md">
					<img src="/assets/apphero/gemini-color.svg" alt="AI" class="w-4 h-4" />
					<span class="font-semibold">AI</span>
				</div>
				<div class="flex items-center gap-1.5 px-3 py-1 rounded-full bg-pink-100/80 dark:bg-pink-500/20 border border-pink-200 dark:border-pink-400/30 text-pink-700 dark:text-pink-200 backdrop-blur-md">
					<img src="/assets/apphero/youtube.svg" alt="Streaming" class="w-4 h-4" />
					<span class="font-semibold">流媒体</span>
				</div>
				<div class="flex items-center gap-1.5 px-3 py-1 rounded-full bg-sky-100/80 dark:bg-sky-500/20 border border-sky-200 dark:border-sky-400/30 text-sky-700 dark:text-sky-200 backdrop-blur-md">
					<img src="/assets/apphero/twitter-x.svg" alt="Social" class="w-3.5 h-3.5 invert-0 dark:invert dark:invert-0" />
					<span class="font-semibold">全球社交</span>
				</div>
			</div>

			{subtitle && (
				<p class="text-lg font-semibold text-gray-700 dark:text-gray-200 mb-2">
					{subtitle}
				</p>
			)}
			<p class="text-lg text-gray-600 dark:text-gray-300 leading-relaxed mb-6 max-w-2xl mx-auto md:mx-0">{description}</p>
		</div>

		<div class="flex gap-3 justify-center md:justify-start">
			<a
				href={storeLinks.apple}
				target="_blank"
				rel="noopener noreferrer"
				class="group flex items-center gap-2 rounded-xl border border-black/5 dark:border-white/10 bg-white/60 dark:bg-white/[0.04] px-4 py-3 hover:bg-white/80 dark:hover:bg-white/[0.08] hover:border-black/10 dark:hover:border-white/20 shadow-sm flex-1 min-w-0 md:flex-initial backdrop-blur-sm transition-all"
			>
				<div class="flex items-center justify-center w-6 h-6 flex-shrink-0">
					<FaCcApplePay className="text-gray-800 dark:text-gray-300 group-hover:scale-110 group-hover:text-black dark:group-hover:text-white w-5 h-5 transition-transform" />
				</div>
				<span class="text-left min-w-0">
					<div class="text-[10px] font-medium text-gray-500 dark:text-gray-400 group-hover:text-gray-700 dark:group-hover:text-gray-300">立即</div>
					<div class="text-xs font-semibold tracking-wide text-gray-900 dark:text-white/90 group-hover:text-black dark:group-hover:text-white">加入购物车</div>
				</span>
			</a>

			<a
				href={storeLinks.google}
				target="_blank"
				rel="noopener noreferrer"
				class="group flex items-center gap-2 rounded-xl border border-black/5 dark:border-white/10 bg-white/60 dark:bg-white/[0.04] px-4 py-3 hover:bg-white/80 dark:hover:bg-white/[0.08] hover:border-black/10 dark:hover:border-white/20 shadow-sm flex-1 min-w-0 md:flex-initial backdrop-blur-sm transition-all"
			>
				<div class="flex items-center justify-center w-6 h-6 flex-shrink-0">
					<BiSupport className="text-gray-800 dark:text-gray-300 group-hover:scale-110 group-hover:text-black dark:group-hover:text-white w-4 h-4 transition-transform" />
				</div>
				<span class="text-left min-w-0">
					<div class="text-[10px] font-medium text-gray-500 dark:text-gray-400 group-hover:text-gray-700 dark:group-hover:text-gray-300">有问题</div>
					<div class="text-xs font-semibold tracking-wide text-gray-900 dark:text-white/90 group-hover:text-black dark:group-hover:text-white">请求技术支持</div>
				</span>
			</a>
		</div>
	</div>
</div>

<style>
	.ken-burns {
		animation: ken-burns 30s ease-in-out infinite alternate;
		transform-origin: center center;
	}

	@keyframes ken-burns {
		0% {
			transform: scale(1) translate(0, 0);
		}
		100% {
			transform: scale(1.15) translate(-1%, 2%);
		}
	}
</style>