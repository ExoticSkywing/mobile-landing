---
/** biome-ignore-all lint/correctness/noUnusedImports: React icons are used in JSX */
/** biome-ignore-all lint/correctness/noUnusedVariables: variables used in Astro components */

import { FaAlipay, FaGooglePlay } from "react-icons/fa";
import { FaCcApplePay } from "react-icons/fa6";
import { BiSupport } from "react-icons/bi";
import { MdVerified } from "react-icons/md";
import RatingStars from "../../ui/RatingStars";
import type { AppHeroProps } from "@/types/app";

interface Props extends AppHeroProps {}

const { title, subtitle, description, storeLinks, logo, logoCrop = false, officialSite = "#" } = Astro.props;

---

<div class="mb-16 flex flex-col items-center md:items-start md:flex-row gap-8 relative isolate overflow-hidden min-h-[300px] rounded-b-3xl md:rounded-3xl p-4 md:p-8 -mx-4 md:mx-0 pt-12 md:pt-8 bg-white dark:bg-black transition-colors duration-300">

	<!-- Static High-Quality Background with Ken Burns Effect -->
	<div class="absolute inset-0 z-0 pointer-events-none overflow-hidden">
		<!-- Light Mode Image: Holo BG -->
		<img 
			src="/assets/apphero/holo-bg-full.png" 
			alt="Hero Background Light" 
			class="absolute inset-0 w-full h-full object-cover opacity-90 dark:opacity-0 transition-opacity duration-500 ken-burns"
		/>
		
		<!-- Dark Mode Image: Fractal Glass -->
		<img 
			src="/assets/apphero/18-fractal-glass-hero-bg.jpg" 
			alt="Hero Background Dark" 
			class="absolute inset-0 w-full h-full object-cover opacity-0 dark:opacity-80 transition-opacity duration-500 ken-burns"
		/>
		
		<!-- Overlay to ensure text readability -->
		<div class="absolute inset-0 bg-white/40 dark:bg-black/30 transition-colors duration-300"></div>
	</div>

	<div class="flex-shrink-0 md:self-center relative z-10">
		{logoCrop ? (
			<div class="rounded-2xl border border-black/5 dark:border-white/10 bg-white/40 dark:bg-white/[0.02] p-6 w-[192px] h-[192px] flex items-center justify-center shadow-lg dark:shadow-sm backdrop-blur-md">
				<img src={logo} alt="App Icon" class="h-40 w-40 rounded-2xl object-cover shadow-sm" />
			</div>
		) : (
			<div class="rounded-2xl border border-black/5 dark:border-white/10 bg-white/40 dark:bg-white/[0.02] p-3 inline-flex items-center justify-center shadow-lg dark:shadow-sm backdrop-blur-md">
				<img
					src={logo}
					alt="App Icon"
					class="max-w-[224px] max-h-[224px] w-auto h-auto object-contain"
				/>
			</div>
		)}
	</div>

	<div class="flex flex-1 flex-col justify-between text-center md:text-left relative z-10">
		<div>
			<h1 class="text-4xl font-bold text-gray-900 dark:text-white mb-2 tracking-tight">{title}</h1>
			
			<div class="flex items-center gap-3 mb-4 justify-center md:justify-start flex-wrap">
				<div class="flex items-center gap-1.5">
					<RatingStars rating={5.0} />
					<span class="text-sm font-medium text-gray-600 dark:text-gray-300 ml-1">· 1.2K ratings</span>
				</div>
			</div>

			<div class="flex items-center gap-2 mb-6 justify-center md:justify-start flex-wrap text-xs">
				<div class="flex items-center gap-1.5 px-3 py-1 rounded-full bg-indigo-100/80 dark:bg-indigo-500/20 border border-indigo-200 dark:border-indigo-400/30 text-indigo-700 dark:text-indigo-200 backdrop-blur-md">
					<img src="/assets/apphero/gemini-color.svg" alt="AI" class="w-4 h-4" />
					<span class="font-semibold">AI</span>
				</div>
				<div class="flex items-center gap-1.5 px-3 py-1 rounded-full bg-pink-100/80 dark:bg-pink-500/20 border border-pink-200 dark:border-pink-400/30 text-pink-700 dark:text-pink-200 backdrop-blur-md">
					<img src="/assets/apphero/youtube.svg" alt="Streaming" class="w-4 h-4" />
					<span class="font-semibold">流媒体</span>
				</div>
				<div class="flex items-center gap-1.5 px-3 py-1 rounded-full bg-sky-100/80 dark:bg-sky-500/20 border border-sky-200 dark:border-sky-400/30 text-sky-700 dark:text-sky-200 backdrop-blur-md">
					<img src="/assets/apphero/twitter-x.svg" alt="Social" class="w-3.5 h-3.5 dark:invert" />
					<span class="font-semibold">全球社交</span>
				</div>
			</div>

	{subtitle && (
				<a 
					href={officialSite} 
					target="_blank" 
					rel="noopener noreferrer"
					class="inline-flex items-center gap-2 text-lg font-semibold text-gray-700 dark:text-gray-200 mb-2 hover:text-blue-600 dark:hover:text-blue-400 transition-colors group/subtitle"
				>
					{subtitle}
					<span class="inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full bg-blue-50 dark:bg-blue-500/30 border border-blue-100 dark:border-blue-400/40 text-[10px] sm:text-xs font-medium text-blue-600 dark:text-blue-200 opacity-90 group-hover/subtitle:opacity-100 transition-opacity whitespace-nowrap">
						<MdVerified className="w-3.5 h-3.5 sm:w-3 sm:h-3" />
						官方网站
					</span>
				</a>
			)}
			<p class="text-lg text-gray-600 dark:text-gray-300 leading-relaxed mb-6 max-w-2xl mx-auto md:mx-0">{description}</p>
		</div>

		<div class="flex gap-3 justify-center md:justify-start">
			<a
				href={storeLinks.apple}
				target="_blank"
				rel="noopener noreferrer"
				class="group flex items-center gap-3 rounded-xl border border-black/5 dark:border-white/10 bg-white/60 dark:bg-white/[0.04] px-5 py-3.5 shadow-sm backdrop-blur-sm transition-all duration-300 hover:bg-white dark:hover:bg-white/[0.1] hover:border-black/10 dark:hover:border-white/20 hover:-translate-y-1 hover:shadow-xl hover:shadow-indigo-500/20 dark:hover:shadow-indigo-500/10 active:scale-95 active:translate-y-0"
			>
				<div class="flex items-center justify-center w-8 h-8 rounded-lg bg-black/5 dark:bg-white/10 group-hover:bg-black/10 dark:group-hover:bg-white/20 transition-colors">
					<FaCcApplePay className="text-gray-900 dark:text-gray-100 w-5 h-5 group-hover:scale-110 transition-transform duration-300" />
				</div>
				<span class="text-left min-w-0 flex flex-col">
					<span class="text-[10px] font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Get it now</span>
					<span class="text-sm font-bold text-gray-900 dark:text-white group-hover:text-indigo-600 dark:group-hover:text-indigo-300 transition-colors">加入购物车</span>
				</span>
			</a>

			<a
				href={storeLinks.google}
				target="_blank"
				rel="noopener noreferrer"
				class="group flex items-center gap-3 rounded-xl border border-black/5 dark:border-white/10 bg-white/60 dark:bg-white/[0.04] px-5 py-3.5 shadow-sm backdrop-blur-sm transition-all duration-300 hover:bg-white dark:hover:bg-white/[0.1] hover:border-black/10 dark:hover:border-white/20 hover:-translate-y-1 hover:shadow-xl hover:shadow-cyan-500/20 dark:hover:shadow-cyan-500/10 active:scale-95 active:translate-y-0"
			>
				<div class="flex items-center justify-center w-8 h-8 rounded-lg bg-black/5 dark:bg-white/10 group-hover:bg-black/10 dark:group-hover:bg-white/20 transition-colors">
					<BiSupport className="text-gray-900 dark:text-gray-100 w-5 h-5 group-hover:scale-110 group-hover:rotate-12 transition-all duration-300" />
				</div>
				<span class="text-left min-w-0 flex flex-col">
					<span class="text-[10px] font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Support</span>
					<span class="text-sm font-bold text-gray-900 dark:text-white group-hover:text-cyan-600 dark:group-hover:text-cyan-300 transition-colors">请求技术支持</span>
				</span>
			</a>
		</div>
	</div>
</div>

<style>
	.ken-burns {
		animation: ken-burns 30s ease-in-out infinite alternate;
		transform-origin: center center;
	}

	@keyframes ken-burns {
		0% {
			transform: scale(1) translate(0, 0);
		}
		100% {
			transform: scale(1.15) translate(-1%, 2%);
		}
	}
</style>