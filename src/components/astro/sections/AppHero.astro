---
/** biome-ignore-all lint/correctness/noUnusedImports: React icons are used in JSX */
/** biome-ignore-all lint/correctness/noUnusedVariables: variables used in Astro components */

import { FaAlipay, FaGooglePlay } from "react-icons/fa";
import { FaCcApplePay } from "react-icons/fa6";
import { BiSupport } from "react-icons/bi";
import type { AppHeroProps } from "@/types/app";

interface Props extends AppHeroProps {}

const { title, subtitle, description, storeLinks, logo, logoCrop = false } = Astro.props;

---

<div class="mb-16 flex flex-col items-center md:items-start md:flex-row gap-8 relative isolate overflow-hidden min-h-[300px] rounded-b-3xl md:rounded-3xl p-4 md:p-8 -mx-4 md:mx-0 pt-12 md:pt-8 bg-black">

	<!-- Purple Flowing Background (Unicorn Studio) -->
	<div data-us-project="ILgOO23w4wEyPQOKyLO4" class="absolute inset-0 z-0 pointer-events-none" style="opacity: 0.8; transform: scale(1.5); will-change: transform;"></div>
	<div class="flex-shrink-0 md:self-center relative z-10">
		{logoCrop ? (
			<div class="rounded-2xl border border-white/10 bg-white/[0.02] p-6 w-[192px] h-[192px] flex items-center justify-center shadow-sm backdrop-blur-sm">
				<img src={logo} alt="App Icon" class="h-40 w-40 rounded-2xl object-cover" />
			</div>
		) : (
			<div class="rounded-2xl border border-white/10 bg-white/[0.02] p-3 inline-flex items-center justify-center shadow-sm backdrop-blur-sm">
				<img
					src={logo}
					alt="App Icon"
					class="max-w-[224px] max-h-[224px] w-auto h-auto object-contain"
				/>
			</div>
		)}
	</div>

	<div class="flex flex-1 flex-col justify-between text-center md:text-left relative z-10">
		<div>
			<h1 class="text-4xl font-bold text-white mb-1">{title}</h1>
			{subtitle && (
				<p class="text-lg font-semibold text-gray-200 mb-2">
					{subtitle}
				</p>
			)}
			<p class="text-lg text-gray-300 leading-relaxed mb-6 max-w-2xl mx-auto md:mx-0">{description}</p>
		</div>

		<div class="flex gap-3 justify-center md:justify-start">
			<a
				href={storeLinks.apple}
				target="_blank"
				rel="noopener noreferrer"
				class="group flex items-center gap-2 rounded-xl border border-white/10 bg-white/[0.04] px-4 py-3 hover:bg-white/[0.08] hover:border-white/20 shadow-sm flex-1 min-w-0 md:flex-initial backdrop-blur-sm transition-all"
			>
				<div class="flex items-center justify-center w-6 h-6 flex-shrink-0">
					<FaCcApplePay className="text-gray-300 group-hover:scale-110 group-hover:text-white w-5 h-5 transition-transform" />
				</div>
				<span class="text-left min-w-0">
					<div class="text-[10px] font-medium text-gray-400 group-hover:text-gray-300">立即</div>
					<div class="text-xs font-semibold tracking-wide text-white/90 group-hover:text-white">加入购物车</div>
				</span>
			</a>

			<a
				href={storeLinks.google}
				target="_blank"
				rel="noopener noreferrer"
				class="group flex items-center gap-2 rounded-xl border border-white/10 bg-white/[0.04] px-4 py-3 hover:bg-white/[0.08] hover:border-white/20 shadow-sm flex-1 min-w-0 md:flex-initial backdrop-blur-sm transition-all"
			>
				<div class="flex items-center justify-center w-6 h-6 flex-shrink-0">
					<BiSupport className="text-gray-300 group-hover:scale-110 group-hover:text-white w-4 h-4 transition-transform" />
				</div>
				<span class="text-left min-w-0">
					<div class="text-[10px] font-medium text-gray-400 group-hover:text-gray-300">有问题</div>
					<div class="text-xs font-semibold tracking-wide text-white/90 group-hover:text-white">请求技术支持</div>
				</span>
			</a>
		</div>
	</div>
</div>

<!-- Load Unicorn Studio Library for the background effect -->
<script src="https://cdn.jsdelivr.net/gh/hiunicornstudio/unicornstudio.js@v1.4.29/dist/unicornStudio.umd.js" is:inline></script>
<script is:inline>
  // Ensure UnicornStudio initializes even if the script loads late or DOM is updated
  document.addEventListener('DOMContentLoaded', () => {
    const init = () => {
      if (window.UnicornStudio) {
        window.UnicornStudio.init();
      } else {
        setTimeout(init, 500);
      }
    };
    init();
  });
</script>